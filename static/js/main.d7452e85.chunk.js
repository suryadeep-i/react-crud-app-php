(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(5),c=n.n(l),u=(n(15),r.a.createContext()),o=u.Provider,i=n(2),s=n(3),m=n(1),p=function(){var e=Object(a.useContext)(u).insertUser,t=Object(a.useState)({}),n=Object(m.a)(t,2),l=n[0],c=n[1],o=function(e,t){c(Object(s.a)({},l,Object(i.a)({},t,e.target.value)))};return r.a.createElement("form",{className:"insertForm",onSubmit:function(t){t.preventDefault(),e(l),t.target.reset()}},r.a.createElement("h2",null,"Insert User"),r.a.createElement("label",{htmlFor:"_name"},"Name"),r.a.createElement("input",{type:"text",id:"_name",onChange:function(e){return o(e,"user_name")},placeholder:"Enter name",autoComplete:"off",required:!0}),r.a.createElement("label",{htmlFor:"_email"},"Email"),r.a.createElement("input",{type:"email",id:"_email",onChange:function(e){return o(e,"user_email")},placeholder:"Enter email",autoComplete:"off",required:!0}),r.a.createElement("label",{htmlFor:"_phone"},"Phone"),r.a.createElement("input",{type:"phone",id:"_phone",onChange:function(e){return o(e,"user_phone")},placeholder:"Enter phone",autoComplete:"off",required:!0}),r.a.createElement("label",{htmlFor:"_message"},"Message"),r.a.createElement("input",{type:"text",id:"_message",onChange:function(e){return o(e,"user_message")},placeholder:"Enter message",autoComplete:"off",required:!0}),r.a.createElement("input",{type:"submit",value:"Insert"}))},d=function(){var e=Object(a.useContext)(u),t=e.users,n=e.userLength,l=e.editMode,c=e.cancelEdit,o=e.updateUser,p=e.deleteUser,d=Object(a.useState)({}),h=Object(m.a)(d,2),f=h[0],E=h[1],b=function(e,t){E(Object(s.a)({},f,Object(i.a)({},t,e.target.value)))};return n?r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Phone"),r.a.createElement("th",null,"Message"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,t.map(function(e){var t=e.id,n=e.user_name,a=e.user_email,u=e.user_phone,i=e.user_message;return!0===e.isEditing?r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement("input",{type:"text",defaultValue:n,onChange:function(e){return b(e,"user_name")}})),r.a.createElement("td",null,r.a.createElement("input",{type:"email",defaultValue:a,onChange:function(e){return b(e,"user_email")}})),r.a.createElement("td",null,r.a.createElement("input",{type:"phone",defaultValue:u,onChange:function(e){return b(e,"user_phone")}})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",defaultValue:i,onChange:function(e){return b(e,"user_message")}})),r.a.createElement("td",null,r.a.createElement("button",{className:"btn green-btn",onClick:function(){o(f)}},"Save"),r.a.createElement("button",{className:"btn default-btn",onClick:function(){return c(t)}},"Cancel"))):r.a.createElement("tr",{key:t},r.a.createElement("td",null,n),r.a.createElement("td",null,a),r.a.createElement("td",null,u),r.a.createElement("td",null,i),r.a.createElement("td",null,r.a.createElement("button",{className:"btn default-btn",onClick:function(){return function(e,t,n,a,r){E({id:e,user_name:t,user_email:n,user_phone:a,user_message:r}),l(e)}(t,n,a,u,i)}},"Edit"),r.a.createElement("button",{className:"btn red-btn",onClick:function(){return function(e){window.confirm("Are you sure?")&&p(e)}(t)}},"Delete")))}))):r.a.createElement("p",null,null===n?"Loading...":"Please insert some users.")},h=n(6),f=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],r=t[1],l=Object(a.useState)(null),c=Object(m.a)(l,2),u=c[0],o=c[1];Object(a.useEffect)(function(){fetch("http://localhost:8888/php-react/all-users.php").then(function(e){return e.json()}).then(function(e){e.success?(r(e.users.reverse()),o(!0)):o(0)}).catch(function(e){console.log(e)})},[]);return{users:n,editMode:function(e){n=n.map(function(t){return t.id===e?(t.isEditing=!0,t):(t.isEditing=!1,t)}),r(n)},cancelEdit:function(e){n=n.map(function(t){return t.id===e?(t.isEditing=!1,t):t}),r(n)},updateUser:function(e){fetch("http://localhost:8888/php-react/update-user.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(t){t.success?(n=n.map(function(t){return t.id===e.id?(t.isEditing=!1,t.user_name=e.user_name,t.user_email=e.user_email,t):t}),r(n)):alert(t.msg)}).catch(function(e){console.log(e)})},insertUser:function(e){fetch("http://localhost:8888/php-react/add-user.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(t){t.id?(r([Object(s.a)({id:t.id},e)].concat(Object(h.a)(n))),o(!0)):alert(t.msg)}).catch(function(e){console.log(e)})},deleteUser:function(e){var t=n.filter(function(t){return t.id!==e});fetch("http://localhost:8888/php-react/delete-user.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then(function(e){return e.json()}).then(function(e){e.success?(r(t),1===n.length&&o(0)):alert(e.msg)}).catch(function(e){console.log(e)})},userLength:u}};var E=function(){var e=f();return r.a.createElement(o,{value:e},r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"React JS + PHP CRUD Application"),r.a.createElement("div",{className:"wrapper"},r.a.createElement("section",{className:"left-side"},r.a.createElement(p,null)),r.a.createElement("section",{className:"right-side"},r.a.createElement(d,null)))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root"))},7:function(e,t,n){e.exports=n(17)}},[[7,2,1]]]);
//# sourceMappingURL=main.d7452e85.chunk.js.map